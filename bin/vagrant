#!/usr/bin/env bash

if [[ -n "${DEBUG:-}" ]]; then
  echo VAGRANT_DEFAULT_PROVIDER "${VAGRANT_DEFAULT_PROVIDER:-}" 1>&2
fi

function main {
  local shome="$(cd -P -- "${BASH_SOURCE%/*}/.." && pwd -P)"
  source "$shome/script/profile"

  if [[ -x /opt/vagrant/bin/vagrant ]]; then
    exec /opt/vagrant/bin/vagrant "$@"
  else
    export BUNDLE_GEMFILE="$shome/vendor/vagrant-hashicorp/Gemfile"
    exec bundle exec vagrant "$@"
  fi
}

source sub "$0" "$@"
